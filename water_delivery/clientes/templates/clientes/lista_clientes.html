{% extends 'base.html' %}
{% load static %}

{% block title %}Lista de Clientes{% endblock %}

{% block content %}
<h1>Clientes Registrados</h1>
    <a href="{% url 'clientes:nuevo_cliente' %}" class="btn btn-primary">Nuevo Cliente</a>
    <a href="{% url 'clientes:nuevo_despacho' %}" class="btn btn-secondary">Registrar Despacho</a>

<table class="table">
    <thead>
        <tr>
            <th>Nombre</th>
            <th>Teléfono</th>
            <th>Dirección</th>
            <th>Deuda (botellones)</th>
            <th>Acciones</th>
        </tr>
    </thead>
    <tbody>
        {% for cliente in clientes %}
        <tr>
            <td>{{ cliente.nombre }} {{ cliente.apellido }}</td>
            <td>{{ cliente.telefono }}</td>
            <td>{{ cliente.direccion }}</td>
            <td>{{ cliente.debe_total }}</td>
            <td>
                <a href="{% url 'editar_cliente' cliente.pk %}" class="btn btn-sm btn-warning">Editar</a>
                <!-- Botón para desactivar (si activo=False, ocultar en lista) -->
                {% if cliente.activo %}
                <form action="{% url 'editar_cliente' cliente.pk %}" method="post" style="display:inline;">
                    {% csrf_token %}
                    <input type="hidden" name="activo" value="false">
                    <button type="submit" class="btn btn-sm btn-danger">Desactivar</button>
                </form>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}